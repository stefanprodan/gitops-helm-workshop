(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{269:function(e,t,r){"use strict";r.r(t);var n=r(38),o=Object(n.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"introduction"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#introduction","aria-hidden":"true"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),r("p",[e._v("This guide walks you through setting up a progressive delivery GitOps pipeline on a Kubernetes cluster.")]),e._v(" "),r("h2",{attrs:{id:"what-is-gitops"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#what-is-gitops","aria-hidden":"true"}},[e._v("#")]),e._v(" What is GitOps?")]),e._v(" "),r("p",[e._v("GitOps is a way to do Continuous Delivery, it works by using Git as a source of truth for\ndeclarative infrastructure and workloads. For Kubernetes this means using "),r("code",[e._v("git push")]),e._v(" instead\nof "),r("code",[e._v("kubectl create/apply")]),e._v(" or "),r("code",[e._v("helm install/upgrade")]),e._v(".")]),e._v(" "),r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[e._v("GitOps vs CiOps")]),e._v(" "),r("p",[e._v("In a traditional CI/CD pipeline, CD is an implementation extension powered by the continuous integration tooling\nto promote build artifacts to production. In the GitOps pipeline model, any change to production must be committed\nin source control (preferable via a pull request) prior to being applied on the cluster.\nIf the entire production state is under version control and described in a single Git repository,\nwhen disaster strikes, the whole infrastructure can be quickly restored without rerunning the CI pipelines.")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.weave.works/blog/kubernetes-anti-patterns-let-s-do-gitops-not-ciops",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kubernetes anti-patterns: Let's do GitOps, not CIOps!"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("In order to apply the GitOps model to Kubernetes you need three things:")]),e._v(" "),r("ul",[r("li",[e._v("a Git repository with your workloads definitions in YAML format,\nHelm charts and any other Kubernetes custom resource that defines your cluster desired state")]),e._v(" "),r("li",[e._v("a container registry where your CI system pushes immutable images\n(no "),r("em",[e._v("latest")]),e._v(" tags, use "),r("em",[e._v("semantic versioning")]),e._v(" or git "),r("em",[e._v("commit sha")]),e._v(")")]),e._v(" "),r("li",[e._v("a Kubernetes controller that does a two-way synchronization:\n"),r("ul",[r("li",[e._v("watches for changes in the config repository and applies them to your cluster")]),e._v(" "),r("li",[e._v("watches the container registry for new images and  updates the workload\ndefinitions based on deployment policies")])])])]),e._v(" "),r("p",[e._v("In this workshop you'll be using\nGitHub to host the config repo,\nDocker Hub as the container registry,\n"),r("a",{attrs:{href:"https://github.com/fluxcd/flux",target:"_blank",rel:"noopener noreferrer"}},[e._v("Flux"),r("OutboundLink")],1),e._v(" as the GitOps controller and\n"),r("a",{attrs:{href:"https://github.com/fluxcd/helm-operator",target:"_blank",rel:"noopener noreferrer"}},[e._v("Helm Operator"),r("OutboundLink")],1),e._v(" for app lifecycle management.")]),e._v(" "),r("h2",{attrs:{id:"what-is-progressive-delivery"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#what-is-progressive-delivery","aria-hidden":"true"}},[e._v("#")]),e._v(" What is Progressive Delivery?")]),e._v(" "),r("p",[e._v("Progressive delivery is an umbrella term for advanced deployment patterns like canaries, feature flags and A/B testing.\nProgressive delivery techniques are used to reduce the risk of introducing a new software version in production\nby giving app developers and SRE teams a fine-grained control over the blast radius.")]),e._v(" "),r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[e._v("Canary release")]),e._v(" "),r("p",[e._v("A benefit of using canary releases is the ability to do capacity testing of the new version in a production environment\nwith a safe rollback strategy if issues are found. By slowly ramping up the load, you can monitor and capture metrics\nabout how the new version impacts the production environment.")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://martinfowler.com/bliki/CanaryRelease.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Martin Fowler blog"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("In this workshop you'll be using\n"),r("a",{attrs:{href:"https://github.com/weaveworks/flagger",target:"_blank",rel:"noopener noreferrer"}},[e._v("Flagger"),r("OutboundLink")],1),e._v(",\n"),r("a",{attrs:{href:"https://github.com/linkerd/linkerd2",target:"_blank",rel:"noopener noreferrer"}},[e._v("Linkerd"),r("OutboundLink")],1),e._v(" and\n"),r("a",{attrs:{href:"https://github.com/prometheus",target:"_blank",rel:"noopener noreferrer"}},[e._v("Prometheus"),r("OutboundLink")],1),e._v("\nto automate canary releases for Helm charts.")])])},[],!1,null,null,null);t.default=o.exports}}]);